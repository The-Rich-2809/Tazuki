@{
    Layout = "_LayoutAdmin";
}
@using System.Data;

<style>
    /* Estilos generales */
    body {
        background-color: #f8f9fa;
        font-family: 'Arial', sans-serif;
    }

    /* Contenedor principal */
    .container {
        max-width: 800px;
        margin-top: 50px;
        margin-bottom: 50px;
        background-color: white;
        padding: 30px;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    /* Títulos */
    h1 {
        font-size: 2.5rem;
        font-weight: bold;
        color: #4B92DB;
        margin-bottom: 30px;
    }

    /* Formulario */
    form {
        padding: 20px;
    }

    /* Etiquetas y campos de texto */
    label {
        font-weight: 600;
        color: #495057;
    }

    /* Campos de texto */
    input[type="text"], textarea, select, input[type="file"] {
        border: 1px solid #ced4da;
        border-radius: 5px;
        padding: 10px;
        font-size: 1rem;
        width: 100%;
        margin-top: 5px;
    }

    /* Áreas de texto */
    textarea {
        resize: vertical;
    }

    /* Botones */
    button[type="submit"] {
        background-color: #4B92DB;
        color: white;
        font-size: 1rem;
        font-weight: 600;
        border: none;
        padding: 12px 30px;
        border-radius: 5px;
        margin-top: 20px;
        cursor: pointer;
    }

        button[type="submit"]:hover {
            background-color: #3a7cc0;
        }

    /* Estilo de los checkboxes */
    .checkbox-group {
        margin-bottom: 20px;
    }

    /* Paginación */
    #pagination {
        text-align: center;
        margin-top: 20px;
    }

        #pagination button {
            margin: 0 5px;
            font-size: 1rem;
        }

        #pagination .active {
            background-color: #4B92DB;
            color: white;
        }

    /* Campo de búsqueda */
    #search {
        margin-top: 10px;
        margin-bottom: 20px;
    }

    /* Ajustes de espaciado */
    .mb-3 {
        margin-bottom: 20px;
    }

</style>


<div class="container mt-5">
    <h1 class="mb-4 text-center">Formulario con Carga de Archivos</h1>

    <!-- El atributo enctype="multipart/form-data" es crucial para la subida de archivos -->
    <form asp-controller="Admin" asp-action="AgregarDiseno" method="post" enctype="multipart/form-data">

        <!-- Campo de Texto (Textbox) -->
        <div class="mb-3">
            <label for="nombre" class="form-label">Nombre del Diseño</label>
            <input type="text" class="form-control" id="nombre" name="nombre" placeholder="Ingresa tu nombre" required>
        </div>

        <!-- Área de Texto (Textarea) -->
        <div class="mb-3">
            <label for="descripcion" class="form-label">Descripción</label>
            <textarea class="form-control" id="descripcion" name="descripcion" rows="3" placeholder="Añade una descripción"></textarea>
        </div>

        <!-- Menú Desplegable (Combobox/Select) -->
        <div class="mb-3">
            <label for="tipoTaza" class="form-label">Tamaño de taza</label>
            <select class="form-select" id="tipoDocumento" name="tipoTaza" aria-label="Selecciona un tipo de documento">
                <option selected disabled>Elige una opción...</option>
                <option value="factura">Factura</option>
                <option value="reporte">Reporte</option>
                <option value="contrato">Contrato</option>
                <option value="otro">Otro</option>
            </select>
        </div>

        <div class="mb-3">
                <!-- Campo de búsqueda -->
                <div class="form-group">
                    <label for="search">Buscar opciones</label>
                    <input type="text" id="search" class="form-control" placeholder="Busca una opción...">
                </div>

                <div class="form-group">
                    <label for="opciones">Selecciona tus opciones</label>
                    <div id="opciones" class="checkbox-group">
                        <!-- Las opciones se cargarán aquí -->
                        @foreach(DataRow row_tag in ViewBag.Tags.Rows)
                        {
                            <div class="custom-control custom-checkbox">
                            <input name="tags" type="checkbox" class="custom-control-input" id="opcion1" value="@row_tag[0]">
                                <label class="custom-control-label" for="opcion1">@row_tag[1]</label>
                            </div>
                        }
                    </div>
                </div>

                <!-- Paginación -->
                <div class="btn-group" id="pagination">
                    <!-- Los botones de paginación se agregarán aquí -->
                </div>
        </div>

        <!-- Campo para Subir Múltiples Archivos -->
        <div class="mb-3">
            <label for="formFileMultiple" class="form-label">Subir Archivos</label>
            <!-- El atributo "multiple" permite seleccionar más de un archivo -->
            <input class="form-control" type="file" name="archivo">
        </div>

        <!-- Botón de Envío -->
        <button type="submit" class="btn btn-primary">Enviar</button>

    </form>
</div>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popperjs/core@2.5.2/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

<script>
    const itemsPerPage = 10;
    let currentPage = 1;

    // Función para mostrar las opciones
    function showOptions(page, query = "") {
        const checkboxes = document.querySelectorAll('.custom-control');
        const filteredOptions = Array.from(checkboxes).filter(option => {
            return option.querySelector('.custom-control-label').textContent.toLowerCase().includes(query.toLowerCase());
        });

        const start = (page - 1) * itemsPerPage;
        const end = page * itemsPerPage;

        // Ocultar todas las opciones primero
        checkboxes.forEach(option => option.style.display = 'none');

        // Mostrar solo las opciones que pertenecen a la página actual
        filteredOptions.slice(start, end).forEach(option => option.style.display = '');

        // Actualizar la paginación
        updatePagination(filteredOptions.length, page);
    }

    // Función para actualizar los botones de paginación
    function updatePagination(totalItems, currentPage) {
        const totalPages = Math.ceil(totalItems / itemsPerPage);
        const paginationContainer = document.getElementById("pagination");

        paginationContainer.innerHTML = ""; // Limpiar la paginación

        for (let i = 1; i <= totalPages; i++) {
            const btn = document.createElement("button");
            btn.classList.add("btn", "btn-secondary");
            btn.textContent = i;
            btn.onclick = () => {
                currentPage = i;
                showOptions(currentPage, document.getElementById("search").value);
            };
            if (i === currentPage) {
                btn.classList.add("active");
            }
            paginationContainer.appendChild(btn);
        }
    }

    // Función de búsqueda
    document.getElementById("search").addEventListener("input", function() {
        showOptions(1, this.value);
    });

    // Mostrar las opciones iniciales
    showOptions(currentPage);

</script>