@{
    var mensaje = ViewBag.MensajeConfirmacion as string;
    var nombre = ViewBag.Nombre as string;
    var tags = ViewBag.Tags as string[,];
    var error = ViewBag.ErrorMessage as string;

    // Tamaño y precio
    var tamanoNombre = ViewBag.TamanoNombre as string; // ej. "11 oz clásica"
    object precioObj = ViewBag.Precio;                 // decimal o string numérico

    // Formateo MXN seguro
    string precioFmt = "—";
    try
    {
        var mx = new System.Globalization.CultureInfo("es-MX");
        if (precioObj != null)
        {
            // Intento convertir a decimal (acepta decimal y string)
            decimal p = Convert.ToDecimal(precioObj, mx);
            precioFmt = string.Format(mx, "{0:C}", p); // $123.00
        }
    }
    catch
    {
        precioFmt = precioObj?.ToString() ?? "—";
    }
}

@if (!string.IsNullOrEmpty(error))
{
    <div class="alert alert-danger" role="alert">@error</div>
}
else
{
    <div>
        <h3 class="fw-semibold text-primary mb-3">@mensaje</h3>

        <!-- Resumen del diseño -->
        <div class="row text-start g-2">
            <div class="col-12"><strong>Nombre del diseño:</strong> @(!string.IsNullOrWhiteSpace(nombre) ? nombre : "—")</div>
            @*<div class="col-12 col-md-6"><strong>Tamaño de taza:</strong> @(!string.IsNullOrWhiteSpace(tamanoNombre) ? tamanoNombre : "—")</div>*@
            <div class="col-12 col-md-6"><strong>Tamaño de taza: Taza de 11oz </strong> </div>
            @*<div class="col-12 col-md-6"><strong>Precio:</strong> @precioFmt</div>*@
            <div class="col-12 col-md-6"><strong>Precio: $50.00</strong> </div>
        </div>

        @if (tags != null && tags.GetLength(0) > 0)
        {
            <table class="table table-bordered mt-3">
                <thead class="table-light">
                    <tr>
                        <th>Frase</th>
                        <th>Estado</th>
                    </tr>
                </thead>
                <tbody>
                @for (int i = 0; i < tags.GetLength(0); i++)
                {
                    var estado = tags[i, 1];
                    <tr>
                        <td>@tags[i, 0]</td>
                        <td>
                            @if (estado == "Encontrada")
                            {
                                <span class="badge bg-success">@estado</span>
                            }
                            else if (estado == "No encontrada")
                            {
                                <span class="badge bg-danger">@estado</span>
                            }
                            else
                            {
                                <span class="badge bg-secondary">@estado</span>
                            }
                        </td>
                    </tr>
                }
                </tbody>
            </table>
        }
    </div>
}
