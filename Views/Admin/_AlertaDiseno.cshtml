@{
    // --- ESTA PARTE SE MANTIENE IGUAL ---
    var mensaje = ViewBag.MensajeConfirmacion as string;
    var nombre = ViewBag.Nombre as string;
    var tags = ViewBag.Tags as string[,]; // Esta variable ya no la usaremos en la tabla
    var error = ViewBag.ErrorMessage as string;

    // --- ¡AÑADIR ESTO! ---
    // Recuperamos el Token y la Extensión para pasarlos al siguiente formulario
    var uploadToken = ViewBag.UploadToken as string;
    var uploadExt = ViewBag.UploadExt as string;

    // Tamaño y precio (Tu lógica original)
    var tamanoNombre = ViewBag.TamanoNombre as string; 
    object precioObj = ViewBag.Precio;
    
    // (Tu lógica de formateo de precio está bien)
}
@* La declaración del modelo es correcta para recibir una List<string[]> *@
@model List<string[]>

@if (!string.IsNullOrEmpty(error))
{
    <div class="alert alert-danger" role="alert">@error</div>
}
else
{
    <div>
        @* --- ESTA PARTE SE MANTIENE IGUAL --- *@
        <h3 class="fw-semibold text-primary mb-3">@mensaje</h3>
        <div class="row text-start g-2">
            <div class="col-12"><strong>Nombre del diseño:</strong> @(!string.IsNullOrWhiteSpace(nombre) ? nombre : "—")</div>
            <div class="col-12 col-md-6"><strong>Tamaño de taza: Taza de 11oz </strong> </div>
            <div class="col-12 col-md-6"><strong>Precio: $50.00</strong> </div>
        </div>

        @* --- ESTA SECCIÓN ESTÁ PERFECTA --- *@
        @if (Model != null && Model.Any())
        {
            <table class="table table-bordered mt-3">
                <thead class="table-light">
                    <tr>
                        <th>Frase</th>
                        <th>Estado</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var fila in Model)
                    {
                        var estado = fila[2]; 
                        <tr>
                            <td>@fila[1]</td>
                            <td>
                                @if (estado == "Encontrado")
                                {
                                    <span class="badge bg-success">@estado</span>
                                }
                                else if (estado == "No encontrado" || estado == "no encontrado")
                                {
                                    <span class="badge bg-danger">@estado</span>
                                }
                                else
                                {
                                    <span class="badge bg-secondary">Nombre</span>
                                }
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        }
    </div>

    <div id="hiddenModalData" style="display: none;">
        <input type="hidden" name="UploadToken" value="@uploadToken" />
        <input type="hidden" name="UploadExt" value="@uploadExt" />
        
        </div>
}