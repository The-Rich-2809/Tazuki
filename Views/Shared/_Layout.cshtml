<!doctype html>
<html lang="es" data-bs-theme="light">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Tazuki Remix</title>
    <meta name="description"
        content="Tazas y regalos sublimados personalizados. Compra fácil y recibe en todo México." />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --brand: #3bbfad;
            /* Verde del logo como principal */
            --brand-2: #fd7e14;
            /* Acento secundario */
            --ink: #212529;
            /* Texto */
            --paper: #ffffff;
            /* Fondo */
            --soft: #f8fafc;
            /* Secciones suaves */
            --muted: #6c757d;
            /* Texto tenue */
        }

        html,
        body {
            height: 100%
        }

        body {
            font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
            background: linear-gradient(180deg, #ffffff 0%, #f7f9fc 100%);
            color: var(--ink);
            padding-top: 72px;
            /* Compensa navbar fixed */
        }

        /* --------- NAVBAR --------- */
        .navbar {
            background: rgba(255, 255, 255, .95);
            backdrop-filter: blur(8px);
            box-shadow: 0 2px 14px rgba(0, 0, 0, .06);
            z-index: 1100
        }

        .navbar-brand img {
            height: 60px;
            object-fit: contain
        }

        .nav-link.active,
        .nav-link:hover {
            color: var(--brand) !important
        }

        /* --------- HERO --------- */
        .hero {
            background: radial-gradient(80% 80% at 0% 0%, rgba(59, 191, 173, .12), transparent 50%), radial-gradient(60% 60% at 100% 20%, rgba(253, 126, 20, .10), transparent 60%), linear-gradient(180deg, #ffffff, #f4f7fe);
            border-bottom: 1px solid #eef1f6;
        }

        .hero-badge {
            color: var(--brand);
            background: rgba(59, 191, 173, .12);
            border: 1px solid rgba(59, 191, 173, .3)
        }

        /* --------- BOTONES / COLORES MARCA --------- */
        .text-primary {
            color: var(--brand) !important
        }

        .btn-primary {
            background-color: var(--brand);
            border-color: var(--brand)
        }

        .btn-primary:hover {
            background-color: #2ea796;
            border-color: #2ea796
        }

        .btn-outline-primary {
            color: var(--brand);
            border-color: var(--brand)
        }

        .btn-outline-primary:hover {
            background-color: var(--brand);
            color: #fff
        }

        .form-range::-webkit-slider-thumb {
            background: var(--brand)
        }

        .form-range::-moz-range-thumb {
            background: var(--brand)
        }

        /* --------- PASTILLAS DE CATEGORÍA --------- */
        .category-pill input {
            display: none
        }

        .category-pill label {
            cursor: pointer;
            user-select: none;
            border: 1px solid #e8ecf3;
            background: #fff;
            color: #0b1b35
        }

        .category-pill input:checked+label {
            background: var(--brand);
            color: #fff;
            border-color: var(--brand)
        }

        /* --------- CARDS --------- */
        .card {
            border: 1px solid #eef1f6;
            box-shadow: 0 6px 24px rgba(33, 37, 41, .06)
        }

        .card-img-top {
            object-fit: cover;
            height: 200px
        }

        .badge-price {
            background: rgba(59, 191, 173, .10);
            color: var(--brand);
            border: 1px solid rgba(59, 191, 173, .25)
        }

        .rating i {
            color: #ffc107
        }

        /* --------- SECCIONES --------- */
        .section-soft {
            background: var(--soft);
            border-top: 1px solid #eef1f6;
            border-bottom: 1px solid #eef1f6
        }

        .shadow-soft {
            box-shadow: 0 10px 30px rgba(33, 37, 41, .08)
        }

        /* --------- FOOTER --------- */
        .footer a {
            color: #6c757d
        }
    </style>
</head>

<body>
    <!-- NAVBAR -->
    <nav class="navbar navbar-expand-lg fixed-top">
        <div class="container">
            <a class="navbar-brand fw-semibold d-flex align-items-center gap-2" asp-action="Index"
                asp-controller="Home">
                <!-- Coloca el archivo del logo junto al HTML con este mismo nombre -->
                <img src="~/img/tazukylogo.jpg" alt="Tazuki Remix Logo"> <span></span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#nav"
                aria-controls="nav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="nav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link active" asp-action="Catalogo"
                            asp-controller="Home">Catálogo</a></li>
                    <li class="nav-item"><a class="nav-link active"
                            href="https://wa.me/5215578868430?text=Hola%2C%20quiero%20informaci%C3%B3n%20sobre%20sublimaci%C3%B3n">Pedir
                            por WhatsApp</a></li>
                    <li class="nav-item ms-lg-2"><a class="btn btn-primary"
                            href="@Url.Action("InicioSesion", "Home")">Iniciar Sesión</a></li>
                </ul>
            </div>
        </div>
    </nav>
    <main>
        @RenderBody()
    </main>



    <!-- FAQ -->
    <section id="faq" class="section-soft py-5">
        <div class="container">
            <div class="row g-4">
                <div class="col-lg-6">
                    <h3 class="fw-semibold">Preguntas frecuentes</h3>
                    <div class="accordion mt-3" id="faqAcc">
                        <div class="accordion-item">
                            <h2 class="accordion-header"><button class="accordion-button" type="button"
                                    data-bs-toggle="collapse" data-bs-target="#q1">¿Tiempo de elaboración?</button></h2>
                            <div id="q1" class="accordion-collapse collapse show" data-bs-parent="#faqAcc">
                                <div class="accordion-body">De 24 a 72 horas hábiles según volumen y disponibilidad de
                                    insumos. Urgencias: consúltanos.</div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h2 class="accordion-header"><button class="accordion-button collapsed" type="button"
                                    data-bs-toggle="collapse" data-bs-target="#q2">¿Descuentos por mayoreo?</button>
                            </h2>
                            <div id="q2" class="accordion-collapse collapse" data-bs-parent="#faqAcc">
                                <div class="accordion-body">Sí, a partir de 12, 24 y 50 piezas. También hacemos
                                    cotizaciones para eventos y empresas.</div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h2 class="accordion-header"><button class="accordion-button collapsed" type="button"
                                    data-bs-toggle="collapse" data-bs-target="#q3">¿Cómo envío mi diseño?</button></h2>
                            <div id="q3" class="accordion-collapse collapse" data-bs-parent="#faqAcc">
                                <div class="accordion-body">Puedes adjuntarlo por WhatsApp o correo. Aceptamos PNG, JPG,
                                    PDF, AI, PSD. Te confirmamos vista previa antes de imprimir.</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="p-4 bg-white border rounded-4 h-100">
                        <h5 class="fw-semibold">Contacto</h5>
                        <ul class="list-unstyled text-secondary mb-4">
                            <li>WhatsApp: <a href="https://wa.me/5215578868430">+52 5578868430</a></li>
                            <li>Correo: <a href="mailto:contacto@tazasmx.com">contacto@tazasmx.com</a></li>
                            <li>Instagram: <a href="#">tazasmx</a></li>
                        </ul>
                        <a class="btn btn-primary btn-lg w-100" target="_blank"
                            href="https://wa.me/5215578868430?text=Hola%2C%20quiero%20informaci%C3%B3n%20sobre%20sublimaci%C3%B3n">Escríbenos
                            por WhatsApp</a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- FOOTER -->
    <footer class="py-4 footer">
        <div class="container">
            <div class="border-top pt-3 d-flex justify-content-between small text-secondary">
                <span>© <span id="year"></span> Tazuki Remix</span>
                <a href="#inicio">Volver arriba</a>
            </div>
        </div>
    </footer>

    <!-- MODAL PERSONALIZA -->
    <div class="modal fade" id="modalPersonaliza" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Personalizar producto</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="formPersonaliza">
                        <div class="mb-3">
                            <label class="form-label">Producto</label>
                            <input id="pNombre" type="text" class="form-control" readonly>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Detalles del diseño</label>
                            <textarea id="pDetalles" class="form-control" rows="3"
                                placeholder="Ej: nombres, colores, frase, logo, foto…"></textarea>
                        </div>
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label class="form-label">Cantidad</label>
                                <input id="pCantidad" type="number" class="form-control" min="1" value="1">
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Precio aprox.</label>
                                <input id="pPrecio" type="text" class="form-control" readonly>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-primary" data-bs-dismiss="modal">Cancelar</button>
                    <a id="waLink" class="btn btn-primary" target="_blank" href="#">Enviar por WhatsApp</a>
                </div>
            </div>
        </div>
    </div>

    <!-- SCRIPTS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.js"></script>
    <script>
        // Año dinámico (Esto es seguro)
        const yearSpan = document.getElementById('year');
        if (yearSpan) {
            yearSpan.textContent = new Date().getFullYear();
        }

        // --- Lógica de Filtros (Segura) ---
        const grid = document.getElementById('gridProductos');

        if (grid) {
            const cards = [...grid.querySelectorAll('.producto')];
            const buscador = document.getElementById('buscador');
            const rango = document.getElementById('rangoPrecio');
            const lblPrecio = document.getElementById('lblPrecio');

            if (rango && lblPrecio) {
                rango.value = 300;
                lblPrecio.textContent = '$' + rango.value;
                rango.addEventListener('input', () => { lblPrecio.textContent = '$' + rango.value; filtrar(); });
            }
            if (buscador) {
                buscador.addEventListener('input', filtrar);
            }

            document.addEventListener('change', (e) => { if (e.target.name === 'cat') filtrar(); });

            function filtrar() {
                const q = buscador.value.toLowerCase().trim();
                const max = parseInt(rango.value, 10);
                const cat = document.querySelector('input[name="cat"]:checked')?.value || 'all';
                cards.forEach(card => {
                    const tags = (card.dataset.tags || '').toLowerCase();
                    const precio = parseInt(card.dataset.precio || '0', 10);
                    const c = card.dataset.cat || '';
                    const title = card.querySelector('.card-title')?.textContent.toLowerCase() || '';
                    const visible = ((!q || tags.includes(q) || title.includes(q)) && (precio <= max || !precio) && (cat === 'all' || c === cat));
                    card.style.display = visible ? '' : 'none';
                });
            }
        } // --- Fin 'if (grid)'


        // --- Lógica del Modal (Ahora también es segura) ---
        const modal = document.getElementById('modalPersonaliza');

        // Solo ejecutamos esto SI el modal existe en la página
        if (modal) {

            // Función segura: verifica que los elementos existan DENTRO de la función
            function actualizarWA() {
                const pNombre = document.getElementById('pNombre');
                const pDetalles = document.getElementById('pDetalles');
                const pCantidad = document.getElementById('pCantidad');
                const waLink = document.getElementById('waLink');

                // Si alguno falta, no hacemos nada para evitar el crash
                if (!pNombre || !pDetalles || !pCantidad || !waLink) {
                    return;
                }

                const nombre = pNombre.value;
                const det = pDetalles.value.trim();
                const qty = pCantidad.value;
                const mensaje = `Hola, quiero personalizar: ${nombre}%0A` +
                    `Cantidad: ${qty}%0A` +
                    (det ? `Detalles: ${encodeURIComponent(det)}%0A` : ``) +
                    `¿Me ayudas con el diseño y total?`;
                const telefono = '5215578868430';
                waLink.href = `https://wa.me/${telefono}?text=${mensaje}`;
            }

            // Asignar el listener al modal
            modal.addEventListener('show.bs.modal', (ev) => {
                const btn = ev.relatedTarget;
                const nombre = btn?.getAttribute('data-producto') || 'Producto';
                const precio = btn?.getAttribute('data-precio') || '';

                const pNombreEl = document.getElementById('pNombre');
                const pPrecioEl = document.getElementById('pPrecio');
                const pCantidadEl = document.getElementById('pCantidad');
                const pDetallesEl = document.getElementById('pDetalles');

                if (pNombreEl) pNombreEl.value = nombre;
                if (pPrecioEl) pPrecioEl.value = precio ? `$${precio} MXN` : 'A cotizar';
                if (pCantidadEl) pCantidadEl.value = 1;
                if (pDetallesEl) pDetallesEl.value = '';

                actualizarWA(); // Llamamos a la función segura
            });

            // Asignar listeners a los inputs
            ['pDetalles', 'pCantidad'].forEach(id => {
                const el = document.getElementById(id);
                if (el) {
                    el.addEventListener('input', actualizarWA);
                }
            });

        } // --- Fin 'if (modal)'
    </script>
</body>
@await RenderSectionAsync("Scripts", required: false)

</html>